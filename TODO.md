# TODO list

## Rebuild

- Переместить из хендлеров в сервисы дефолтные параметры
- Переместить из хендлеров в сервисы проверки свзязанные с бизнес-логикой
- Добавить проверку привилегий в хендлер отправки сообщений (а лучше в метод сервиса)
- Исправить баг с доступом к аватару по id (проверка на int, но каста нет)
- Добавить MIME-типы, поддержка которых планируется
- Сделать Permissions наследником enum.Flag, разобраться с Restrictions

## Общее

- Генерация превью для картинок
- Генерация превью для ссылок
- Стикеры
- Реакции на сообщения
- Регистронезависимый поиск пользователей и сообщений
- Редактирование/удаление сообщений
- Редактирование/удаление вложений в сообщениях
- Редактирование/удаление сообщений в конференциях

- Аналитика:
  - График по времени постов-вложений

- Баги:
  - Не отображается имя файла-вложения в свежеотправленном сообщении
  - Отображение нового чата когда показываются результаты поиска
  - Не отображается чат в котором все сообщения были удалены

## База данных

- Обновить ERD
- Версионирование сообщений
- (почти готово) Независимая нумерация чатов для каждого юзера
- Добавить в таблицу юзеров-конференций "статус участия"
- Межпользовательские отношения
- Перенести отметку "deleted" из таблицы сообщений в таблицы связывания сообщений
- Перенести стоблец "sender" из таблиц связывания сообщений в таблицу сообщений
- Добавить в таблицу конференций столбец "дата создания":
- Исправить порядок отображения пустой конференции (она всегда вверху)

## Core APIs

- обработка переходов по несуществующим путям (несуществующие юзеры/конференции)

## Checklist

### General

- [ ] Внести мелкие исправления в архитектуру БД
- [+] Пересесть с id'шников в адресной строке на юзернеймы
- [ ] Реализовать классы-прослойки для сущностей
- [+] Реализовать аватарки для юзеров и конференций
- [+] Реализовать возможность устанавливать/изменять/удалять аватарки
- [+] Миграция на RESTful API

### Conferences

#### Conferences general

- [+] Отправка, редактирование, удаление сообщений в конференциях
- [+] Редактирование, удаление вложений к сообщениям
- [ ] Поддержка конференций в Events API (app.core.sse)

#### Conferences management

- [ ] Выдача ролей и банов
- [ ] Изменение информации о конференции
- [ ] Удаление конференций

### Front-end

- [ ] Реализовать FSM-like управление
- [ ] Реализовать возможность логаута

### Code appearance

- [ ] Написать документацию (как минимум докстринги)
- [ ] Написать тесты
